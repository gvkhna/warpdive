---
// main dashboard single page app

import MainLayout from '@/layouts/main-layout.astro'
import App from '@/partials/app/app'
import {verifyValidSession} from '@/lib/github-client'

export const prerender = false

const existingSession = await verifyValidSession(Astro)
if (!existingSession.valid && existingSession.redirect) {
  return existingSession.redirect
}
---

<MainLayout title='App Dashboard'>
  <App client:only='react' />
</MainLayout>
