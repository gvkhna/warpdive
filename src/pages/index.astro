---
import MainLayout from '@/layouts/main-layout.astro'
import client from '@/lib/api-client'
import {drizzle} from 'drizzle-orm/d1'
import {desc} from 'drizzle-orm'
import {users} from '@/db/schema'
export const prerender = false

// const test = await client.$get()
// const data = await test.json()
// console.log(data)
// const x = JSON.stringify(data)

const db = drizzle(Astro.locals.runtime.env.DB)

// const newUser = await db.insert(users).values({id: '0', fullName: 'test'})

const usersData = await db.select().from(users).orderBy(desc(users.id))
---

<MainLayout
  title='Signin'
  desc='Sign in to your account'
>
  <div>WIP</div>
  <div>
    {
      usersData.map((user) => (
        <li>
          {user.id} {user.fullName}
        </li>
      ))
    }
  </div>
  <div>testing</div>
</MainLayout>
